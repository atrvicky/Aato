<!DOCTYPE html>
<!-- HTML file to host Blockly in a mobile WebView. -->
<html>

<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="./css/bootstrap.min.css">

    <title>Aato Blockly:Alpha-2</title>

    <script src="js/popper.min.js"></script>
    <script src="js/blockly_compressed.js"></script>

    <!-- the js needed to code and blocks -->
    <script src="generators/javascript_compressed.js"></script>
    <script src="generators/python_compressed.js"></script>
    <script src="js/blocks_compressed.js"></script>
    <script src="js/blocks_custom.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>

    <!-- include the custom blocks from json -->
    <script src="generators/gen_custom_js.js"></script>
    <script src="generators/gen_custom_py.js"></script>
    <script src="msg/js/en.js"></script>
    <!-- <script src="js/toolbox.js"></script> -->
    <link rel="stylesheet" href="./css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Tomorrow:300,400,500&display=swap" rel="stylesheet">
    <script defer src="./js/icons.min.js"></script>
</head>

<body>
    <div class="container-fluid" id="main-wrapper">
        <div class="row" style="height: 100%; position: relative; z-index:100;">
            <div class="col-sm-3" id="floating-container"
                style="position: absolute; top: 0px; right: 0px; z-index: 101;">
                <div id="mode-indicator-wrapper" onclick="showRemote()">
                    <p id="mode-indicator">Design Mode</p>
                </div>
                <!-- control panel -->
                <div id="buttons-wrapper">
                    <button type="button" class="btn btn-light btn-sm" id="terminal-btn" onclick="showTerminal()"><i
                            class="fas fa-terminal" id="show-terminal-fav"></i></button>
                    <button type="button" class="btn btn-light btn-sm" style="display: none;" id="connect-btn"
                        onclick="initConnection()"><i class="fas fa-link" id="connect-fav"></i></button>
                    <button type="button" class="btn btn-light btn-sm" id="settings-btn" onclick="showSettings()"><i
                            class="fas fa-cog" id="show-settings-fav"></i></button>
                    <!-- <button type="button" class="btn btn-light btn-sm" id="upload-btn" onclick="runCode()"><i class="fas fa-play" id="upload-fav"></i></button> -->
                    <button type="button" class="btn btn-light btn-sm" id="upload-btn" onclick=""><i class="fas fa-play" id="upload-fav"></i></button>
                </div>

            </div>
            <div class="col-md-12" id="blocklyArea">
                <div id="blocklyDiv" style="position: absolute;">

                </div>
                <div class="container-fluid" id="remote-div" style="position: absolute; display: none; height: 100%;">
                    <div class="row joystick-rows" id="remote-indicators" style="margin-top: 16px;">
                        <!-- contains the indicators and displays in the remote -->
                        <div class="indicator">
                            <i class="fas fa-circle light" id="indicator-light-a"></i>
                            <span class="text" id="indicator-a-text">Indicator-A</span>
                        </div>
                        <div class="indicator">
                            <i class="fas fa-circle light" id="indicator-light-b"></i>
                            <span class="text" id="indicator-b-text">Indicator-B</span>
                        </div>
                    </div>

                    <div class="row joystick-rows" id="remote-dynamic">
                        <!-- contains the dynamic elements like joystick and toggle switches -->
                        <div class="col-sm-6">
                            <div class="toggle" style="text-align: right;">
                                <span class="text" for="toggle-a">Toggle-A</span>
                                <div class="custom-control custom-switch" id="toggle-a-wrapper">
                                    <input type="checkbox" class="custom-control-input" id="toggle-a">
                                    <label class="custom-control-label text" for="toggle-a"></label>
                                </div>
                            </div>
                            <div class="joystick-wrapper" id="left-joystick">

                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="toggle" style="text-align: left;">
                                <span class="text" for="toggle-b">Toggle-B</span>
                                <div class="custom-control custom-switch" id="toggle-b-wrapper">
                                    <input type="checkbox" class="custom-control-input" id="toggle-b">
                                    <label class="custom-control-label text" for="toggle-b"></label>
                                </div>
                            </div>
                            <div class="joystick-wrapper" id="right-joystick">

                            </div>
                        </div>
                    </div>

                    <div class="row joystick-rows" id="remote-statics"
                        style="position: absolute; bottom: 0; right: 0; left: 0;">
                        <!-- contains the static elements such as push-buttons -->
                        <div class="col-sm-6">
                            <div class="joystick-buttons" style="text-align: right;">
                                <button type="button" id="btn-a" class="btn btn-danger btn-lg">Btn-A</button>
                            </div>
                            <div class="joystick-buttons" style="text-align: right;">
                                <button type="button" id="btn-b" class="btn btn-danger btn-lg">Btn-B</button>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="joystick-buttons" style="text-align: left;">
                                <button type="button" id="btn-c" class="btn btn-danger btn-lg">Btn-C</button>
                            </div>
                            <div class="joystick-buttons" style="text-align: left;">
                                <button type="button" id="btn-d" class="btn btn-danger btn-lg">Btn-D</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="toast-wrapper" style="position:absolute; bottom:70px; right:10px">
                    <!-- Then put toasts within -->
                    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                        <div class="toast-header">
                            <strong class="mr-auto">Connection Update</strong>
                            <!-- <small class="text-muted">just now</small> -->
                            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="toast-body" style="min-width: 300px">
                            Toast body.
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-0" id="code-div" style="display: none; height: 100%">
                <div id="code-div-container" style="display: block; height: 98%">

                </div>
            </div>
        </div>
    </div>

    <!-- Enter Password modal -->
    <div class="modal fade" id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="passwordModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordModalCenterTitle">Enter Password</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Enter the 4-digit pin</p>
                    <input type="password" class="form-control" id="repl-password">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        onclick="connect()">Close</button>
                    <button type="button" class="btn btn-primary" id="password-submit-btn"
                        onclick="parse_send_password()">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings modal -->
    <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <i class="fas fa-cog" style="margin: auto 16px auto 4px; align-self: center;"></i>
                    <h5 class="modal-title headings" id="settingsModalCenterTitle">Aato Settings</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <small class="captions">Connection Settings</small>
                    <div class="custom-control custom-switch" style="margin-top: 8px;">
                        <input type="checkbox" class="custom-control-input" id="instant-upload-switch">
                        <label class="custom-control-label body-text" for="instant-upload-switch">Instant Upload</label>
                        <small data-toggle="tooltip" data-placement="right"
                            title="Uploads instantly on dropping a block">
                            <i class="fas fa-info-circle"></i>
                        </small>
                    </div>
                    <div class="custom-control custom-switch" style="margin-top: 8px;">
                        <input type="checkbox" class="custom-control-input" id="webrepl-switch" disabled="true">
                        <label class="custom-control-label body-text" for="webrepl-switch">Use WebREPL Protocol</label>
                        <small data-toggle="tooltip" data-placement="right"
                            title="Used for tesing and on firmware older than V2.0">
                            <i class="fas fa-info-circle"></i>
                        </small>
                    </div>
                    <br>
                    <small class="captions">Gamepad Settings</small>
                    <div class="custom-control custom-switch" style="margin-top: 8px;">
                        <input type="checkbox" class="custom-control-input" id="enable-js-switch">
                        <label class="custom-control-label body-text" for="enable-js-switch">Enable Gamepad</label>
                        <small data-toggle="tooltip" data-placement="right" title="Show or hide Gamepad blocks">
                            <i class="fas fa-info-circle"></i>
                        </small>
                    </div>
                    <label class="body-text" style="margin-top: 12px;">Left gamepad motion control</label> <small data-toggle="tooltip" data-placement="right"
                    title="Gamepad movement control"><i class="fas fa-info-circle"></i></small>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="leftGamepadOptions"
                            id="leftGamepadOptionsRadioX" value="x">
                        <label class="form-check-label body-text" for="leftGamepadOptionsRadioX">Only X</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="leftGamepadOptions"
                            id="leftGamepadOptionsRadioY" value="y">
                        <label class="form-check-label body-text" for="leftGamepadOptionsRadioY">Only Y</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="leftGamepadOptions"
                            id="leftGamepadOptionsRadioBoth" value="b" checked="true">
                        <label class="form-check-label body-text" for="leftGamepadOptionsRadioBoth">X & Y</label>
                    </div>
                    <br>
                    <label class="body-text" style="margin-top: 12px;">Right gamepad motion control</label> <small data-toggle="tooltip" data-placement="right"
                    title="Gamepad movement control"><i class="fas fa-info-circle"></i></small>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rightGamepadOptions"
                            id="rightGamepadOptionsRadioX" value="x">
                        <label class="form-check-label body-text" for="rightGamepadOptionsRadioX">Only X</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rightGamepadOptions"
                            id="rightGamepadOptionsRadioY" value="y">
                        <label class="form-check-label body-text" for="rightGamepadOptionsRadioY">Only Y</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rightGamepadOptions"
                            id="rightGamepadOptionsRadioBoth" value="b" checked="true">
                        <label class="form-check-label body-text" for="rightGamepadOptionsRadioBoth">X & Y</label>
                    </div>                    
                    <br>
                    <br>
                    <small class="captions">Language Settings</small>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="lang-checkbox-ta" disabled="true"
                            value="ta">
                        <label class="form-check-label" for="lang-checkbox-ta">Tamil</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="lang-checkbox-en"
                            value="en" checked="true">
                        <label class="form-check-label" for="lang-checkbox-en">English</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-block" data-dismiss="modal"
                        onclick="">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- error modal -->
    <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header error-modal-header">
                    <i class="fas fa-exclamation-triangle" style="margin: auto 16px auto 4px; align-self: center;"></i>
                    <h5 class="modal-title" id="settingsModalCenterTitle">Error!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="error-msg">
                    Something went wrong!
                </div>
            </div>
        </div>
    </div>

    <!-- the custom workspace should be loaded here -->
    <xml id="workspaceBlocks" style="display:none">
        <!-- <block type="on_start" id="%o=Vt4G1Y^6A]Xg7P,s+" x="150" y="100"/> -->
    </xml>

    <!-- the custom toolbox should be loaded here -->
    <!-- https://blockly-demo.appspot.com/static/demos/blockfactory/index.html#juod54 -->
    <xml id="toolbox" style="display: none">
        <category name="Logic" colour="#5b80a5">
            <block type="controls_if"></block>
            <block type="logic_compare">
                <field name="OP">EQ</field>
            </block>
            <block type="logic_operation">
                <field name="OP">AND</field>
            </block>
            <block type="logic_negate"></block>
            <block type="logic_boolean">
                <field name="BOOL">TRUE</field>
            </block>
            <block type="logic_null"></block>
            <block type="logic_ternary"></block>
        </category>
        <category name="Loops" colour="#5ba55b">
            <block type="on_start"></block>
            <block type="forever"></block>
            <block type="controls_repeat_ext">
                <value name="TIMES">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_whileUntil">
                <field name="MODE">WHILE</field>
            </block>
            <block type="controls_for">
                <field name="VAR" id="$zav,g$m}6HC}R(u[?Nj">i</field>
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
                <value name="BY">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_forEach">
                <field name="VAR" id="wlkA-_dUMF09mHiCp41p">j</field>
            </block>
            <block type="controls_flow_statements" disabled="true">
                <field name="FLOW">BREAK</field>
            </block>
        </category>
        <category name="Math" colour="#5b67a5">
            <block type="math_number">
                <field name="NUM">0</field>
            </block>
            <block type="math_arithmetic">
                <field name="OP">ADD</field>
                <value name="A">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="B">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
            <block type="math_single">
                <field name="OP">ROOT</field>
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">9</field>
                    </shadow>
                </value>
            </block>
            <block type="math_trig">
                <field name="OP">SIN</field>
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">45</field>
                    </shadow>
                </value>
            </block>
            <block type="math_constant">
                <field name="CONSTANT">PI</field>
            </block>
            <block type="math_number_property">
                <mutation divisor_input="false"></mutation>
                <field name="PROPERTY">EVEN</field>
                <value name="NUMBER_TO_CHECK">
                    <shadow type="math_number">
                        <field name="NUM">0</field>
                    </shadow>
                </value>
            </block>
            <block type="math_round">
                <field name="OP">ROUND</field>
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">3.1</field>
                    </shadow>
                </value>
            </block>
            <block type="math_on_list">
                <mutation op="SUM"></mutation>
                <field name="OP">SUM</field>
            </block>
            <block type="math_modulo">
                <value name="DIVIDEND">
                    <shadow type="math_number">
                        <field name="NUM">64</field>
                    </shadow>
                </value>
                <value name="DIVISOR">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
            </block>
            <block type="math_constrain">
                <value name="VALUE">
                    <shadow type="math_number">
                        <field name="NUM">50</field>
                    </shadow>
                </value>
                <value name="LOW">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="HIGH">
                    <shadow type="math_number">
                        <field name="NUM">100</field>
                    </shadow>
                </value>
            </block>
            <block type="math_random_int">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">100</field>
                    </shadow>
                </value>
            </block>
            <block type="math_random_float"></block>
        </category>
        <category name="Text" colour="#5ba58c">
            <block type="text">
                <field name="TEXT"></field>
            </block>
            <block type="text_join">
                <mutation items="2"></mutation>
            </block>
            <block type="text_append">
                <field name="VAR" id="y1V3QPfX2cgwtFc{();9">item</field>
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT"></field>
                    </shadow>
                </value>
            </block>
            <block type="text_length">
                <value name="VALUE">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_isEmpty">
                <value name="VALUE">
                    <shadow type="text">
                        <field name="TEXT"></field>
                    </shadow>
                </value>
            </block>
            <block type="text_indexOf">
                <field name="END">FIRST</field>
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR" id="6N=BTngW^R+nT~Maqg#A">text</field>
                    </block>
                </value>
                <value name="FIND">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_charAt">
                <mutation at="true"></mutation>
                <field name="WHERE">FROM_START</field>
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR" id="6N=BTngW^R+nT~Maqg#A">text</field>
                    </block>
                </value>
            </block>
            <block type="text_getSubstring">
                <mutation at1="true" at2="true"></mutation>
                <field name="WHERE1">FROM_START</field>
                <field name="WHERE2">FROM_START</field>
                <value name="STRING">
                    <block type="variables_get">
                        <field name="VAR" id="6N=BTngW^R+nT~Maqg#A">text</field>
                    </block>
                </value>
            </block>
            <block type="text_changeCase">
                <field name="CASE">UPPERCASE</field>
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_trim">
                <field name="MODE">BOTH</field>
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_print">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_prompt_ext">
                <mutation type="TEXT"></mutation>
                <field name="TYPE">TEXT</field>
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
        </category>
        <category name="Lists" colour="#745ba5">
            <block type="lists_create_with">
                <mutation items="0"></mutation>
            </block>
            <block type="lists_create_with">
                <mutation items="3"></mutation>
            </block>
            <block type="lists_repeat">
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">5</field>
                    </shadow>
                </value>
            </block>
            <block type="lists_length"></block>
            <block type="lists_isEmpty"></block>
            <block type="lists_indexOf">
                <field name="END">FIRST</field>
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR" id="Sb8rkx0,R1#MLvSMEoz}">list</field>
                    </block>
                </value>
            </block>
            <block type="lists_getIndex">
                <mutation statement="false" at="true"></mutation>
                <field name="MODE">GET</field>
                <field name="WHERE">FROM_START</field>
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR" id="Sb8rkx0,R1#MLvSMEoz}">list</field>
                    </block>
                </value>
            </block>
            <block type="lists_setIndex">
                <mutation at="true"></mutation>
                <field name="MODE">SET</field>
                <field name="WHERE">FROM_START</field>
                <value name="LIST">
                    <block type="variables_get">
                        <field name="VAR" id="Sb8rkx0,R1#MLvSMEoz}">list</field>
                    </block>
                </value>
            </block>
            <block type="lists_getSublist">
                <mutation at1="true" at2="true"></mutation>
                <field name="WHERE1">FROM_START</field>
                <field name="WHERE2">FROM_START</field>
                <value name="LIST">
                    <block type="variables_get">
                        <field name="VAR" id="Sb8rkx0,R1#MLvSMEoz}">list</field>
                    </block>
                </value>
            </block>
            <block type="lists_split">
                <mutation mode="SPLIT"></mutation>
                <field name="MODE">SPLIT</field>
                <value name="DELIM">
                    <shadow type="text">
                        <field name="TEXT">,</field>
                    </shadow>
                </value>
            </block>
            <block type="lists_sort">
                <field name="TYPE">NUMERIC</field>
                <field name="DIRECTION">1</field>
            </block>
        </category>
        <sep></sep>
        <category name="Lights" colour="#9fa55b">
            <block type="csl_led_toggle">
                <field name="NAME">1</field>
            </block>
            <block type="led_on">
                <field name="led_choice">1</field>
                <field name="led_lux">100</field>
            </block>
            <block type="led_all_on">
                <field name="led_lux">100</field>
            </block>
            <block type="led_off">
                <field name="led_choice">1</field>
            </block>
            <block type="led_all_off"></block>
            <block type="led_blink">
                <field name="led_choice">1</field>
                <field name="led_lux">100</field>
                <field name="led_time">0.5</field>
            </block>
            <block type="led_fade">
                <field name="led_choice">1</field>
                <field name="led_lux">100</field>
            </block>
        </category>
        <category name="Motors" colour="#745ba5">
            <block type="run_motor">
                <field name="motor_choice">1</field>
                <field name="motor_speed">100</field>
            </block>
            <block type="brake_motor">
                <field name="motor_choice">1</field>
            </block>
            <block type="brake_all_motor"></block>
            <block type="servo_angle">
                <field name="gpio_choice">0</field>
                <value name="NAME">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
            </block>
            <block type="servo_release">
                <field name="gpio_choice">0</field>
            </block>
            <block type="servo_get_angle">
                <field name="gpio_choice">0</field>
            </block>
        </category>
        <category name="Sensors" colour="#995ba5">
            <block type="read_ir">
                <field name="ir_choice">1</field>
            </block>
        </category>
        <category name="IO" colour="#5ba58c">
            <block type="read_gpio">
                <field name="gpio_choice">0</field>
            </block>
            <block type="read_gpio_pup">
                <field name="gpio_choice">0</field>
            </block>
            <block type="write_gpio">
                <field name="gpio_choice">0</field>
                <value name="NAME">
                    <shadow type="gpio_on">
                        <field name="gpio_choice">1</field>
                    </shadow>
                </value>
            </block>
            <block type="toggle_gpio">
                <field name="gpio_choice">0</field>
            </block>
            <block type="gpio_state_listener">
                <field name="gpio_choice">0</field>
            </block>
        </category>
        <category name="Timers" colour="#a55b80">
            <block type="timer_wait">
                <field name="wait_val">1</field>
            </block>
        </category>
        <category name="Display" colour="#a5745b">
            <block type="lcd_home"></block>
            <block type="lcd_clear"></block>
            <block type="lcd_set">
                <field name="lcd_row">1</field>
                <field name="lcd_col">1</field>
            </block>
            <block type="lcd_display">
                <field name="NAME">True</field>
            </block>
            <block type="lcd_cursor">
                <field name="NAME">True</field>
            </block>
            <block type="lcd_blink">
                <field name="NAME">True</field>
            </block>
            <block type="lcd_backlight">
                <field name="NAME">True</field>
            </block>
            <block type="lcd_move_left"></block>
            <block type="lcd_move_right"></block>
            <block type="lcd_rtl">
                <field name="NAME">ltr</field>
            </block>
            <block type="lcd_autoscroll">
                <field name="NAME">True</field>
                <field name="scrollSpeed">100</field>
            </block>
            <block type="lcd_brightness">
                <field name="NAME">100</field>
            </block>
            <block type="lcd_write">
                <value name="NAME">
                    <shadow type="text">
                        <field name="TEXT">Hello, World!</field>
                    </shadow>
                </value>
            </block>
            <block type="lcd_type">
                <field name="NAME">False</field>
            </block>
        </category>
        <sep></sep>
        <category name="Variables" colour="#ff2400" custom="VARIABLE"></category>
        <sep></sep>
        <category name="Gamepad">
            <block type="js_indicator">
                <field name="NAME">indicator_a</field>
                <field name="STATUS">True</field>
            </block>
            <block type="js_indicator_value">
                <field name="NAME">indicator_a</field>
            </block>
            <block type="js_toggle">
                <field name="NAME">toggle_a</field>
            </block>
            <block type="js_toggle_statement">
                <field name="NAME">toggle_a</field>
            </block>
            <block type="js_button">
                <field name="NAME">button_a</field>
            </block>
            <block type="js_button_statement">
                <field name="NAME">button_a</field>
            </block>
            <block type="js_nipple_statement">
                <field name="NAME">js_a</field>
                <field name="STATUS">fw</field>
            </block>
            <block type="js_nipple_value">
                <field name="NAME">js_a</field>
                <field name="VALUE">js_x</field>
            </block>
        </category>
    </xml>

    <script src="./js/injector.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
    <script src="./js/comm.js"></script>
    <script src="./js/nipplejs.js"></script>

    <script>
        onresize();

        let floatingContainer = document.getElementById('floating-container');
        let showTerminal = () => {
            // grab the buttons and the required divs
            let showCode = document.getElementById("terminal-btn");
            let showCodeFav = document.getElementById("show-terminal-fav");
            let codeDiv = document.getElementById("code-div");

            // check the display style of the code-div
            codeDivDisplay = codeDiv.style.display;

            // if the code-div is hidden, show it by setting a width else, set the width to 0
            codeDiv.className = codeDivDisplay === "none" ? "col-sm-4" : "col-sm-0";

            // adjust the blockly area to adapt to the new width
            blocklyArea.className = codeDivDisplay === "none" ? "col-sm-8" : "col-sm-12";

            // highlight or normalize the showTerminal button
            showCode.className = codeDivDisplay === "none" ? "btn btn-dark btn-sm" : "btn btn-light btn-sm";

            // for smaller displays (<720px), terminal appears at the bottom -> reduce the height of blocklyarea
            blocklyArea.style.height = codeDivDisplay === "none" && window.innerWidth < 720 ? "75%" : "100%";
            codeDiv.style.height = codeDivDisplay === "none" && window.innerWidth < 720 ? "25%" : "100%";
            codeDiv.style.boxShadow = codeDivDisplay === "none" && window.innerWidth < 720 ? "0px -7px 10px -10px #080708" : "-7px 0px 10px -10px #080708";

            // finally show the code-div
            codeDiv.style.display = codeDivDisplay === "none" ? "block" : "none";

            // adjust the position of the floatingContainer according to code-div
            codeWidth = codeDiv.offsetWidth;
            floatingContainer.style.right = codeWidth + 'px';
            onresize();
            createEditor();
        };

        // a variable to hold the timeout functions
        let timeOut;

        // script to debug the blocks
        function onBlockDrop(event) {
            clearTimeout(timeOut);
            if ((event.type == Blockly.Events.BLOCK_DELETE) || (event.type == Blockly.Events.BLOCK_CHANGE) || (event.type == Blockly.Events.BLOCK_MOVE)) {
                //console.log(Blockly.JavaScript.workspaceToCode(workspace));
                let pyCode = Blockly.Python.workspaceToCode(workspace);
                // console.log(pyCode);
                let code = document.getElementById("code");
                // code.innerText = pyCode;
                sendGET(pyCode);
                updateCode(pyCode);

                if (instantUpload) {
                    timeOut = setTimeout(() => {
                        console.log("Sending to console");
                        sendData(pyCode);
                    }, 500);
                }
            }
        }
        workspace.addChangeListener(onBlockDrop);
    </script>

    <script src="./monaco-editor/min/vs/loader.js"></script>
    <script src="./js/remote.js"></script>

</body>

</html>